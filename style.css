:root {
  --bg: #0f1115;
  --panel: #141821;
  --grid: #2a2f3a;
  --grid-strong: #3a4150;
  --text: #e8ecf1;
  --muted: #a8b0c0;
  --accent: #77e0b5;
}
* { box-sizing: border-box; }
body {
  margin: 0; color: var(--text); background: var(--bg);
  font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

.topbar {
  display: grid; grid-template-columns: 1fr auto auto; gap: 16px;
  align-items: center; padding: 10px 16px; background: var(--panel); border-bottom: 1px solid #222834;
}
.topbar .brand { font-weight: 700; letter-spacing: 0.2px; }
.topbar label { margin-right: 8px; }
.topbar input, .topbar select, .topbar button {
  background: #0d1016; color: var(--text); border: 1px solid #242b39; border-radius: 6px; padding: 6px 10px;
}
.topbar button { cursor: pointer; }
.import-btn { cursor: pointer; }

.palette {
  display: flex; gap: 8px; align-items: center; padding: 8px 16px; border-bottom: 1px solid #222834;
}
.palette button {
  border: 1px solid #2a3140; background: #10141d; color: var(--text); border-radius: 20px; padding: 6px 12px; cursor: pointer;
}

#timeline {
  padding: 12px 16px 60px;
  overflow-x: auto; overflow-y: hidden;
}

.timeline-grid {
  display: grid;
  grid-template-columns: 180px 1fr;
  column-gap: 12px;
}

.ruler, .track-row {
  display: grid;
  grid-template-columns: repeat(var(--bars), var(--barWidth));
  gap: 0;
}
.ruler {
  background: #0d1016; border: 1px solid #242b39; border-radius: 8px; padding: 8px;
}
.ruler .bar {
  height: 24px; border-right: 1px solid var(--grid);
  display: flex; align-items: center; justify-content: flex-end; color: var(--muted); padding-right: 6px; font-size: 12px;
}
.ruler .bar:nth-child(4n) { border-right: 1px solid var(--grid-strong); color: #c8ceda; }

.track {
  display: grid; grid-template-columns: 180px 1fr; column-gap: 12px; margin-top: 8px; align-items: stretch;
}
.track .name {
  background: var(--panel); border: 1px solid #242b39; border-radius: 8px; padding: 10px; display: flex; justify-content: space-between; align-items: center;
}
.track .lane {
  position: relative; border: 1px solid #242b39; border-radius: 8px; background: #0b0e14;
  display: grid; grid-template-columns: repeat(var(--bars), var(--barWidth));
}
.lane .cell { border-right: 1px solid #151b26; }
.lane .cell:nth-child(4n) { border-right: 1px solid #222a38; }

.region {
  position: absolute; top: 6px; height: calc(100% - 12px);
  border-radius: 6px; border: 1px solid rgba(255,255,255,0.18);
  display: flex; align-items: center; padding: 0 10px; cursor: grab; user-select: none;
}
.region:active { cursor: grabbing; }
.region .handle { position: absolute; width: 6px; top: 0; bottom: 0; }
.region .handle.left { left: -3px; cursor: ew-resize; }
.region .handle.right { right: -3px; cursor: ew-resize; }
.region .label { font-weight: 600; text-shadow: 0 1px 0 rgba(0,0,0,0.4); }
.region .meta { font-size: 11px; opacity: 0.85; margin-left: 8px; }

.icon-btn { background: transparent; border: none; color: var(--muted); cursor: pointer; }